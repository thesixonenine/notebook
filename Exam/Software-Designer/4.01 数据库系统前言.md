提要

- 数据库模式
- ER模型
- 关系代数与元组演算(重点)
- 规范化理论(重点)
- 并发控制
- 数据库完整性约束
- 分布式数据库
- 数据仓库与数据挖掘


### 三级模式 - 两级映射(选择题)
![](4.01%20数据库系统前言/1.png)


### 数据库的设计过程
![](4.01%20数据库系统前言/2.png)

### 关系代数

- 并
- 交
- 差
- 笛卡尔积
- 投影
- 选择
- 联接

### 规范化理论

### 函数依赖

### 求候选键
从入度为0的节点开始, 能够遍历所有节点, 则该节点为候选关键字/候选码
如果没有入度为0的, 则需要将中间节点(有入度,也有出度)并入入度为0的属性集中, 直到能遍历所有节点

例1. 给定关系R(A, B, C, D)上的函数依赖集F={A->B, C->B, B->C, B->D}, 求R的候选关键字
答案: A
解析: 从A出发, A->B->C, A->B->D, 这样可以遍历所有.

例2. 关系模式P(A,B,C,D,E,F,G,H,I,J)满足下列函数依赖:FD={ABD->E,AB->G.B->F.C->J.CJ->I,G->H},求候选吗
答案: ABCD
解析: 只有ABCD的组合节点才能遍历所有.

例3. 关系R(A, B, C)满足下列函数依赖:F={B->C,B->A,A->BC}, 关系R的候选关键字为?
A. AB    B. A和B    C.A和BC    D.AC和AB
答案: A和B
解析: 只有A或者B能够遍历所有, 所以关键字有两个, A和B.

### 范式(必考)

1NF: 每列都是不可再分的原子单元
2NF: 每列都和主键相关, 而不能只与主键的某一部分相关(联合主键)
3NF: 每列都和主键列直接相关, 而不是间接相关, 即限制列的冗余性

### 并发控制

#### 事务: 多个操作合并在一起成为一个原子操作
- 原子性: 操作不可拆分
- 一致性: 操作前后, 数据一致. 例如转账操作, 转账前后两个账户总额不变
- 隔离性: 多个事务之间互不影响
- 持续性: 事务执行后, 结果持久化

问题:

丢失更新

不可重复读

脏读


#### 封锁协议

- 一级封锁协议. 事务 T 在修改数据 R 之前必须先对其加 X 锁, 直到事务结束才释放, 可防止丢失修改
- 二级封锁协议. 一级封锁协议加上事务 T 在读取数据 R 之前先对其加 S 锁, 读完后即可释放 S 锁. 可防止丢失修改, 还可以防止脏读
- 三级封锁协议. 一级封锁协议加上事务 T 在读取数据 R 之前先对其加 S 锁, 直到事务结束才释放, 可防止丢失修改, 防止脏读与防止数据重复读.
- 两段锁协议. 可串行化的, 可能发生死锁
